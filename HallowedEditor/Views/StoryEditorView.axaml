<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewModels="clr-namespace:Hallowed.Editor.ViewModels"
             x:Class="Hallowed.Editor.Views.StoryEditorView"
             x:DataType="viewModels:StoryEditorViewModel">

    <Border Classes="ContentPanel">
        <Grid ColumnDefinitions="300,*" ColumnSpacing="15">

            <!-- Left: Story Tree -->
            <Border Grid.Column="0"
                    Background="{StaticResource ParchmentMedium}"
                    Padding="10"
                    CornerRadius="8">
                <Grid RowDefinitions="Auto,Auto,*,Auto">
                    <!-- Header -->
                    <TextBlock Grid.Row="0"
                               Text="📖 Stories"
                               Classes="SectionHeader"
                               FontSize="18" />

                    <Separator Grid.Row="1" Margin="0,10" />

                    <!-- TreeView -->
                    <TreeView Grid.Row="2"
                              ItemsSource="{Binding Items}"
                              SelectedItem="{Binding SelectedItem}"
                              AutoScrollToSelectedItem="True">
                        <TreeView.DataTemplates>
                            <TreeDataTemplate DataType="viewModels:TreeItemViewModel" ItemsSource="{Binding Children}">
                                <StackPanel Orientation="Horizontal" Spacing="5">
                                    <TextBlock Text="📁"
                                               FontSize="16"
                                               IsVisible="{Binding IsFolder}" />
                                    <TextBlock Text="📄"
                                               FontSize="16"
                                               IsVisible="{Binding !IsFolder}" />
                                    <TextBlock Text="{Binding Name}" />
                                </StackPanel>
                            </TreeDataTemplate>
                        </TreeView.DataTemplates>
                    </TreeView>

                    <!-- Buttons -->
                    <StackPanel Grid.Row="3" Spacing="5" Margin="0,10,0,0">
                        <Button Content="📁 New Folder"
                                Command="{Binding AddFolderCommand}"
                                Classes="SecondaryButton"
                                HorizontalAlignment="Stretch" />
                        <Button Content="📄 New Story"
                                Command="{Binding AddStoryCommand}"
                                Classes="PrimaryButton"
                                HorizontalAlignment="Stretch" />
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Right: Story Editor (Placeholder for now) -->
            <Border Grid.Column="1"
                    Background="{StaticResource ParchmentMedium}"
                    Padding="20"
                    CornerRadius="8">
                <StackPanel HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Spacing="10">
                    <TextBlock Text="Story Node Editor"
                               Classes="SectionHeader"
                               HorizontalAlignment="Center" />
                    <TextBlock Text="Select a story to edit"
                               Classes="Subtitle"
                               HorizontalAlignment="Center" />
                </StackPanel>
            </Border>

        </Grid>
    </Border>
</UserControl>