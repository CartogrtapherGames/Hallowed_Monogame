<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Custom Effects | hallowed </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Custom Effects | hallowed ">
      <meta name="generator" content="docfx ">
  
      <link rel="shortcut icon" href="../../../../../favicon.ico">
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/night-owl.min.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" integrity="sha384-EvBWSlnoFgZlXJvpzS+MAUEjvN7+gcCwH+qh7GRFOGgZO0PuwOFro7qPOJnLfe7l" crossorigin="anonymous">
      <link rel="stylesheet" href="../../../../../styles/config.css">
      <link rel="stylesheet" href="../../../../../styles/singulink.css">
      <link rel="stylesheet" href="../../../../../styles/main.css">
      <meta property="docfx:navrel" content="../../../../../toc.html">
      <meta property="docfx:tocrel" content="../../toc.html">
  
  <meta property="docfx:rel" content="../../../../../">
  
    </head>
    <body>
        <!-- Header required for docfx anchor scroll to work -->
        <header id="head"></header>
        <div class="top-navbar">
            <a class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="34" height="34" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>


            <a class="brand" href="../../../../../index.html">
              <img src="../../../../../logo.svg" alt="hallowed" class="logomark">
              <span class="brand-title">hallowed</span>
            </a>        </div>

        <div class="body-content">
            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">
                <div class="sidebar">

                    <div>
                      <div class="mobile-hide">

                        <a class="brand" href="../../../../../index.html">
                          <img src="../../../../../logo.svg" alt="hallowed" class="logomark">
                          <span class="brand-title">hallowed</span>
                        </a>                      </div>

                      <div class="sidesearch">
                        <form id="search" role="search" class="search">
                            <i class="bi bi-search search-icon"></i>
                            <input type="text" id="search-query" placeholder="Search" autocomplete="off">
                        </form>
                      </div>

                      <div id="navbar">
                      </div>
                    </div>                    <div class="sidebar-item-separator"></div>

                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>
                </div>
                <div class="footer">
  
  <strong><a href='https://dotnet.github.io/docfx/'>DocFX</a> + <a href='https://www.singulink.com'>Singulink</a> = â™¥</strong>
                </div>            </nav>

            <main class="main-panel">

                <div id="search-results" style="display: none;">
                  <h1 class="search-list">Search Results for <span></span></h1>
                  <div class="sr-items">
                    <p><i class="bi bi-hourglass-split index-loading"></i></p>
                  </div>
                  <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
                </div>
 

                <div role="main" class="hide-when-search">

                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                         <div class="contribution">
                               <a href="https://github.com/MonoGame/docs.monogame.github.io/blob/main/articles/getting_started/content_pipeline/custom_effects.md/#L1" class="contribution-link">Edit this page</a>
                         </div>

                    <article class="content wrap" id="_content" data-uid="">


<p>A core element of Microsoft XNA is the effect system which is used for all rendering.</p>
<p>For MonoGame we have the burden of supporting stock and custom effects for desktop GLSL, mobile GLSL, DirectX HLSL, and custom formats like that of the PlayStation Mobile.  There currently is no effect system or shader language that supports all the platforms we require, forcing us to build a new custom effect system.</p>
<h2 id="mgfx">MGFX</h2>
<p>MGFX is MonoGame's own &quot;FX&quot; runtime and tools which with the following core goals:</p>
<ul>
<li>Support a similar technique, passes, shaders structure as Microsoft FX files.</li>
<li>Have a textual format for ease of editing.</li>
<li>Have a compiled and optimized binary format for runtime use.</li>
<li>Be cross-platform and support multiple shader languages and bytecodes.</li>
<li>Easy to extend for future platforms and features.</li>
</ul>
<h2 id="stock-effects">Stock Effects</h2>
<p>MonoGame has the following effects built-in and fully supported on current platforms:</p>
<ul>
<li>SpriteEffect</li>
<li>BasicEffect</li>
<li>AlphaTestEffect</li>
<li>DualTextureEffect</li>
<li>EnvironmentMapEffect</li>
<li>SkinnedEffect</li>
</ul>
<p>Under the hood these effects use the same system and tools as one would for a custom Effect.  The source and pre-compiled versions of these effects can be found in the <a href="https://github.com/MonoGame/MonoGame/tree/develop/MonoGame.Framework/Platform/Graphics/Effect/Resources">'MonoGame.Framework\Platform\Graphics\Effect\Resources'</a> folder.</p>
<blockquote>
<p>If your game requires an extra little bit of performance you can easily hand edit the existing effects to remove unnecessary features or optimize for specific hardware and rebuild them with the MGFX tool.</p>
</blockquote>
<h2 id="custom-effects">Custom Effects</h2>
<p>To use a custom effect with MonoGame you must do one of the following:</p>
<ul>
<li>Run the effect file through the <a href="../tools/mgcb.html">MonoGame Effect content processor</a> for loading via the &lt;xref:Microsoft.Xna.Framework.Content.ContentManager&gt; (Recommended).</li>
<li>Process your effect file with the <a href="../tools/mgfxc.html">MGFXC tool</a> and load them yourself at runtime.</li>
</ul>
<h2 id="effect-writing-tips">Effect Writing Tips</h2>
<p>These are some tips for writing or converting effects for use with MonoGame.</p>
<table>
<thead>
<tr>
<th>The supported shader models when targeting DX are the following:</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>vs_4_0_level_9_1</code> and <code>ps_4_0_level_9_1</code></td>
</tr>
<tr>
<td><code>vs_4_0_level_9_3</code> and <code>ps_4_0_level_9_3</code></td>
</tr>
<tr>
<td><code>vs_4_0</code> and <code>ps_4_0</code> (requires <code>HiDef</code> <code>GraphicsProfile</code> at runtime)</td>
</tr>
<tr>
<td><code>vs_4_1</code> and <code>ps_4_1</code> (requires <code>HiDef</code> <code>GraphicsProfile</code> at runtime)</td>
</tr>
<tr>
<td><code>vs_5_0</code> and <code>ps_5_0</code> (requires <code>HiDef</code> <code>GraphicsProfile</code> at runtime)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>When targeting GL platforms we automatically translate FX files to GLSL using a library called <a href="http://icculus.org/mojoshader/">MojoShader</a>.  The supported feature levels are the following:</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>vs_2_0</code> and <code>ps_2_0</code></td>
</tr>
<tr>
<td><code>vs_3_0</code> and <code>ps_3_0</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>You can use preprocessor checks to add conditional code or compilation depending on defined symbols. MonoGame defines the following symbols when compiling effects:</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>2MGFX</code></td>
</tr>
<tr>
<td><code>HLSL</code> and <code>SM4</code> for DirectX</td>
</tr>
<tr>
<td><code>OpenGL</code> and <code>GLSL</code> for OpenGL</td>
</tr>
</tbody>
</table>
<p>As an example, you can conditionally set shader models depending on the platform with the following code:</p>
<pre><code class="lang-hlsl">#if OPENGL
    #define VS_SHADERMODEL vs_3_0
    #define PS_SHADERMODEL ps_3_0
#else
    #define VS_SHADERMODEL vs_4_0_level_9_1
    #define PS_SHADERMODEL ps_4_0_level_9_1
#endif

technique
{
    pass
    {
        VertexShader = compile VS_SHADERMODEL MainVS();
        PixelShader = compile PS_SHADERMODEL MainPS();
    }
};
</code></pre>
<p>Custom symbols can be defined from the <a href="../tools/mgcb_editor.html">MGCB Editor</a> or via <a href="../tools/mgfxc.html">MGFXC</a>.</p>
<ul>
<li>Make sure the pixel shaders inputs <strong>exactly match</strong> the vertex shader outputs so the parameters are passed in the correct registers. The parameters need to have the same size and order. Omitting parameters might not break compilation, but can cause unexpected results.</li>
<li>Note that on GL platforms default values on Effect parameters do not work.  Either set the parameter from code or use a real constant like a #define.</li>
<li>The effect compiler is aggressive about removing unused parameters, be sure the parameters you are setting are actually used.</li>
<li>Preshaders are not supported.</li>
<li>If you think you have found a bug porting a shader, <a href="https://github.com/MonoGame/MonoGame/issues">please let us know</a>.</li>
</ul>

</article>
                </div>

            </main>
        </div>


        <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
        <script type="text/javascript" src="../../../../../styles/jquery.twbsPagination.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/jquery.mark.min.js"></script>
        <script type="text/javascript" src="../../../../../styles/url.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/anchor-js@5.0.0/anchor.min.js"></script>
        <script type="text/javascript" src="../../../../../styles/docfx.js"></script>
        <script type="text/javascript" src="../../../../../styles/main.js"></script>
        <script type="text/javascript" src="../../../../../styles/singulink.js"></script>    </body>
</html>
