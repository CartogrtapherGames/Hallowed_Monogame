<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Making a Scrolling Background | hallowed </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Making a Scrolling Background | hallowed ">
      <meta name="generator" content="docfx ">
  
      <link rel="shortcut icon" href="../../../../../../favicon.ico">
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/night-owl.min.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" integrity="sha384-EvBWSlnoFgZlXJvpzS+MAUEjvN7+gcCwH+qh7GRFOGgZO0PuwOFro7qPOJnLfe7l" crossorigin="anonymous">
      <link rel="stylesheet" href="../../../../../../styles/config.css">
      <link rel="stylesheet" href="../../../../../../styles/singulink.css">
      <link rel="stylesheet" href="../../../../../../styles/main.css">
      <meta property="docfx:navrel" content="../../../../../../toc.html">
      <meta property="docfx:tocrel" content="../../../toc.html">
  
  <meta property="docfx:rel" content="../../../../../../">
  
    </head>
    <body>
        <!-- Header required for docfx anchor scroll to work -->
        <header id="head"></header>
        <div class="top-navbar">
            <a class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="34" height="34" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>


            <a class="brand" href="../../../../../../index.html">
              <img src="../../../../../../logo.svg" alt="hallowed" class="logomark">
              <span class="brand-title">hallowed</span>
            </a>        </div>

        <div class="body-content">
            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">
                <div class="sidebar">

                    <div>
                      <div class="mobile-hide">

                        <a class="brand" href="../../../../../../index.html">
                          <img src="../../../../../../logo.svg" alt="hallowed" class="logomark">
                          <span class="brand-title">hallowed</span>
                        </a>                      </div>

                      <div class="sidesearch">
                        <form id="search" role="search" class="search">
                            <i class="bi bi-search search-icon"></i>
                            <input type="text" id="search-query" placeholder="Search" autocomplete="off">
                        </form>
                      </div>

                      <div id="navbar">
                      </div>
                    </div>                    <div class="sidebar-item-separator"></div>

                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>
                </div>
                <div class="footer">
  
  <strong><a href='https://dotnet.github.io/docfx/'>DocFX</a> + <a href='https://www.singulink.com'>Singulink</a> = â™¥</strong>
                </div>            </nav>

            <main class="main-panel">

                <div id="search-results" style="display: none;">
                  <h1 class="search-list">Search Results for <span></span></h1>
                  <div class="sr-items">
                    <p><i class="bi bi-hourglass-split index-loading"></i></p>
                  </div>
                  <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
                </div>
 

                <div role="main" class="hide-when-search">

                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                         <div class="contribution">
                               <a href="https://github.com/MonoGame/docs.monogame.github.io/blob/main/articles/getting_to_know/howto/graphics/HowTo_Make_Scrolling_Background.md/#L1" class="contribution-link">Edit this page</a>
                         </div>

                    <article class="content wrap" id="_content" data-uid="">

<h2 id="overview">Overview</h2>
<p>In this example, you will draw a texture to the screen and then animate it vertically by scrolling it upwards in a wrapping motion.</p>
<h3 id="end-result">End result</h3>
<p><img src="images/HowTo_ScrollBackground_Final.gif" alt="The output of this tutorial"></p>
<div class="NOTE">
<h5>Note</h5>
<p>Textures that scroll, especially over the screen background are best if they use seamless or tileable textures, <a href="https://www.myfreetextures.com/seamless-textures/">For Example</a>.  Essentially, textures that wrap around the edges to look like a single texture when joined together.</p>
</div>
<h2 id="requirements">Requirements</h2>
<p>The example assumes the texture you are loading contains multiple frames of the same size in a texture whose size is uniform (also known as a spritesheet), for example, the following spritesheet contains 8 Images of a character in different phases of motion, when player together it looks like it is animated.</p>
<p><img src="images/starfield.png" alt="Starfield background"></p>
<p>Save the texture to your content project and name it &quot;<strong>Starfield</strong>&quot; (this name will used to reference it in the project).</p>
<div class="NOTE">
<h5>Note</h5>
<p>The sample also uses a class named <strong>ScrollingBackground</strong>, which is included with the sample below.</p>
<p>The <code>ScrollingBackground.cs</code> is a helper to simplify the scrolling of a texture in the vertical direction. Feel free to modify it to work in different directions.</p>
</div>
<h2 id="drawing-a-scrolling-background-sprite">Drawing a Scrolling Background Sprite</h2>
<ol>
<li><p>Follow the steps of <a href="HowTo_Draw_A_Sprite.html">How To: Draw a Sprite</a>.
A good first step to understanding the loading and drawing of textures and setting up your project.</p>
</li>
<li><p>Create a new class called <code>ScrollingBackground.cs</code> in your project and replace its contents with the following:</p>
<pre><code class="lang-csharp">using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

/// &lt;summary&gt;
/// A helper class to scroll a texture vertically
/// &lt;/summary&gt;
public class ScrollingBackground
{
    // Screen Position to draw the background from.
    private Vector2 screenpos;
    
    // The texture origin point.
    private Vector2 origin;
    
    // The size of the texture in pixels (using ony the texture height).
    private Vector2 texturesize;
    
    // The texture to draw as a background.
    private Texture2D mytexture;
    
    // The height of the screen in pixels.
    private int screenheight;

    public void Load(GraphicsDevice device, Texture2D backgroundTexture)
    {
        mytexture = backgroundTexture;
        screenheight = device.Viewport.Height;
        int screenwidth = device.Viewport.Width;

        // Set the origin so that we're drawing from the 
        // center of the top edge.
        origin = new Vector2(mytexture.Width / 2, 0);

        // Set the screen position to the center of the screen.
        screenpos = new Vector2(screenwidth / 2, screenheight / 2);

        // Offset to draw the second texture, when necessary.
        texturesize = new Vector2(0, mytexture.Height);
    }

    public void Update(float deltaY)
    {
        screenpos.Y += deltaY;
        screenpos.Y %= mytexture.Height;
    }

    public void Draw(SpriteBatch batch, Color color)
    {
        // Draw the texture, if it is still onscreen.
        if (screenpos.Y &lt; screenheight)
        {
            batch.Draw(mytexture, screenpos, null,
                 color, 0, origin, 1, SpriteEffects.None, 0f);
        }
        
        // Draw the texture a second time, behind the first,
        // to create the scrolling illusion.
        batch.Draw(mytexture, screenpos - texturesize, null,
             color, 0, origin, 1, SpriteEffects.None, 0f);
    }
}
</code></pre></li>
<li><p>Load the background texture.</p>
<pre><code class="lang-csharp">private ScrollingBackground myBackground;

protected override void LoadContent()
{
    _spriteBatch = new SpriteBatch(GraphicsDevice);

    // TODO: use this.Content to load your game content here
    myBackground = new ScrollingBackground();
    Texture2D background = Content.Load&lt;Texture2D&gt;(&quot;starfield&quot;);
    myBackground.Load(GraphicsDevice, background);
}
</code></pre>
</li>
<li><p>Determine the size of the background texture and the size of the screen.</p>
<p>The texture size is determined using the <a href="xref:Microsoft.Xna.Framework.Graphics.Texture2D.Height">Height</a> and <a href="xref:Microsoft.Xna.Framework.Graphics.Texture2D.Width">Width</a> properties, and the screen size is determined using the <a href="xref:Microsoft.Xna.Framework.Graphics.GraphicsDevice.Viewport">Viewport</a> property on the graphics device.</p>
</li>
<li><p>Using the texture and screen information, set the origin of the texture to the center of the top edge of the texture, and the initial screen position to the center of the screen.</p>
<pre><code class="lang-csharp">// class ScrollingBackground
private Vector2 screenpos, origin, texturesize;
private Texture2D mytexture;
private int screenheight;

public void Load(GraphicsDevice device, Texture2D backgroundTexture)
{
    mytexture = backgroundTexture;
    screenheight = device.Viewport.Height;
    int screenwidth = device.Viewport.Width;

    // Set the origin so that we're drawing from the 
    // center of the top edge.
    origin = new Vector2(mytexture.Width / 2, 0);

    // Set the screen position to the center of the screen.
    screenpos = new Vector2(screenwidth / 2, screenheight / 2);

    // Offset to draw the second texture, when necessary.
    texturesize = new Vector2(0, mytexture.Height);
}
</code></pre>
</li>
<li><p>To scroll the background, change the screen position of the background texture in your <a href="xref:Microsoft.Xna.Framework.Game#Microsoft_Xna_Framework_Game_Update_Microsoft_Xna_Framework_GameTime_">Game.Update</a> method.</p>
<div class="NOTE">
<h5>Note</h5>
<p>This example moves the background down 100 pixels per second by increasing the screen position's Y value.</p>
</div>
<pre><code class="lang-csharp">private float scrollingSpeed = 100;

protected override void Update(GameTime gameTime)
{
    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed || Keyboard.GetState().IsKeyDown(Keys.Escape))
        Exit();

    // The time since Update was called last.
    float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;

    // TODO: Add your game logic here.
    myBackground.Update(elapsed * scrollingSpeed);

    base.Update(gameTime);
}
</code></pre>
<p>The <code>Y</code> value is kept no larger than the texture height, making the background scroll from the bottom of the screen back to the top.</p>
<pre><code class="lang-csharp">// class ScrollingBackground
public void Update(float deltaY)
{
    screenpos.Y += deltaY;
    screenpos.Y %= mytexture.Height;
}
</code></pre>
</li>
<li><p>Draw the background using the origin and screen position calculated in <a href="xref:Microsoft.Xna.Framework.Game#Microsoft_Xna_Framework_Game_LoadContent">Game.LoadContent</a> and <a href="xref:Microsoft.Xna.Framework.Game#Microsoft_Xna_Framework_Game_Update_Microsoft_Xna_Framework_GameTime_">Game.Update</a>.</p>
<pre><code class="lang-csharp">protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    _spriteBatch.Begin();
    myBackground.Draw(_spriteBatch, Color.White);
    _spriteBatch.End();

    base.Draw(gameTime);
}
</code></pre>
<p>In case the texture does not cover the screen, another texture is drawn. This subtracts the texture height from the screen position using the <strong>texturesize</strong> vector created at load time. This creates the illusion of a loop.</p>
<pre><code class="lang-csharp">// class ScrollingBackground
public void Draw(SpriteBatch batch, Color color)
{
    // Draw the texture, if it is still onscreen.
    if (screenpos.Y &lt; screenheight)
    {
        batch.Draw(mytexture, screenpos, null,
             color, 0, origin, 1, SpriteEffects.None, 0f);
    }

    // Draw the texture a second time, behind the first,
    // to create the scrolling illusion.
    batch.Draw(mytexture, screenpos - texturesize, null,
         color, 0, origin, 1, SpriteEffects.None, 0f);
}
</code></pre>
</li>
</ol>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="HowTo_Draw_A_Sprite.html">Drawing a Sprite</a></li>
<li><a href="HowTo_Animate_Sprite.html">How to animate a sprite</a></li>
<li><a href="HowTo_Draw_Sprite_Background.html">Drawing a Masked Sprite over a Background</a></li>
</ul>
<h3 id="concepts">Concepts</h3>
<ul>
<li><a href="../../whatis/graphics/WhatIs_Sprite.html">What Is a Sprite?</a></li>
</ul>
<h3 id="reference">Reference</h3>
<ul>
<li><a href="xref:Microsoft.Xna.Framework.Graphics.SpriteBatch">SpriteBatch</a></li>
<li><a href="xref:Microsoft.Xna.Framework.Graphics.SpriteBatch#Microsoft_Xna_Framework_Graphics_SpriteBatch_Draw_Microsoft_Xna_Framework_Graphics_Texture2D_Microsoft_Xna_Framework_Vector2_Microsoft_Xna_Framework_Color_">SpriteBatch.Draw</a></li>
<li><a href="xref:Microsoft.Xna.Framework.Graphics.Texture2D">Texture2D</a></li>
</ul>

</article>
                </div>

            </main>
        </div>


        <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
        <script type="text/javascript" src="../../../../../../styles/jquery.twbsPagination.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/jquery.mark.min.js"></script>
        <script type="text/javascript" src="../../../../../../styles/url.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/anchor-js@5.0.0/anchor.min.js"></script>
        <script type="text/javascript" src="../../../../../../styles/docfx.js"></script>
        <script type="text/javascript" src="../../../../../../styles/main.js"></script>
        <script type="text/javascript" src="../../../../../../styles/singulink.js"></script>    </body>
</html>
