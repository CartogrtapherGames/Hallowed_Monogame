<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Scaling Sprites Based On Screen Size | hallowed </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Scaling Sprites Based On Screen Size | hallowed ">
      <meta name="generator" content="docfx ">
  
      <link rel="shortcut icon" href="../../../../../../favicon.ico">
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/night-owl.min.css">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" integrity="sha384-EvBWSlnoFgZlXJvpzS+MAUEjvN7+gcCwH+qh7GRFOGgZO0PuwOFro7qPOJnLfe7l" crossorigin="anonymous">
      <link rel="stylesheet" href="../../../../../../styles/config.css">
      <link rel="stylesheet" href="../../../../../../styles/singulink.css">
      <link rel="stylesheet" href="../../../../../../styles/main.css">
      <meta property="docfx:navrel" content="../../../../../../toc.html">
      <meta property="docfx:tocrel" content="../../../toc.html">
  
  <meta property="docfx:rel" content="../../../../../../">
  
    </head>
    <body>
        <!-- Header required for docfx anchor scroll to work -->
        <header id="head"></header>
        <div class="top-navbar">
            <a class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="34" height="34" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>


            <a class="brand" href="../../../../../../index.html">
              <img src="../../../../../../logo.svg" alt="hallowed" class="logomark">
              <span class="brand-title">hallowed</span>
            </a>        </div>

        <div class="body-content">
            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">
                <div class="sidebar">

                    <div>
                      <div class="mobile-hide">

                        <a class="brand" href="../../../../../../index.html">
                          <img src="../../../../../../logo.svg" alt="hallowed" class="logomark">
                          <span class="brand-title">hallowed</span>
                        </a>                      </div>

                      <div class="sidesearch">
                        <form id="search" role="search" class="search">
                            <i class="bi bi-search search-icon"></i>
                            <input type="text" id="search-query" placeholder="Search" autocomplete="off">
                        </form>
                      </div>

                      <div id="navbar">
                      </div>
                    </div>                    <div class="sidebar-item-separator"></div>

                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>
                </div>
                <div class="footer">
  
  <strong><a href='https://dotnet.github.io/docfx/'>DocFX</a> + <a href='https://www.singulink.com'>Singulink</a> = â™¥</strong>
                </div>            </nav>

            <main class="main-panel">

                <div id="search-results" style="display: none;">
                  <h1 class="search-list">Search Results for <span></span></h1>
                  <div class="sr-items">
                    <p><i class="bi bi-hourglass-split index-loading"></i></p>
                  </div>
                  <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
                </div>
 

                <div role="main" class="hide-when-search">

                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                         <div class="contribution">
                               <a href="https://github.com/MonoGame/docs.monogame.github.io/blob/main/articles/getting_to_know/howto/graphics/HowTo_Scale_Sprites_Matrix.md/#L1" class="contribution-link">Edit this page</a>
                         </div>

                    <article class="content wrap" id="_content" data-uid="">

<h2 id="overview">Overview</h2>
<p>Ensuring that the textures you draw to the screen are always scaled the same regardless of screen resolution is key, especially when targeting so many different devices with varying screen sizes.  The key to handling this is to generate a scaling matrix based on your &quot;designed&quot; screen size and then applying that to the <code>SpriteBatch</code> calls you make when drawing to the screen.  This is crucial for Screen UI / UX for example.</p>
<p>To demonstrate this, we will design a view in a default resolution of <code>800 x 600</code> and define a scaling matrix that works on the same ratio.</p>
<div class="NOTE">
<h5>Note</h5>
<p>If you intend to work with multiple different scaling resolutions, you will need to define different scaling matrix's appropriately, if you allow the user to redefine what resolution the game runs in.</p>
</div>
<h2 id="scaling-sprites-based-on-screen-size">Scaling Sprites Based on Screen Size</h2>
<ol>
<li><p>Set the <a href="xref:Microsoft.Xna.Framework.GraphicsDeviceManager.PreferredBackBufferHeight">PreferredBackBufferHeight</a> and <a href="xref:Microsoft.Xna.Framework.GraphicsDeviceManager.PreferredBackBufferWidth">PreferredBackBufferWidth</a> properties of <a href="xref:Microsoft.Xna.Framework.GraphicsDeviceManager">GraphicsDeviceManager</a> in the <code>Game</code> constructor to set the default screen size of your game.</p>
<pre><code class="lang-csharp">public Game1()
{
    _graphics = new GraphicsDeviceManager(this)
    {
        PreferredBackBufferHeight = 600,
        PreferredBackBufferWidth = 800
    };
    Content.RootDirectory = &quot;Content&quot;;
    IsMouseVisible = true;
}
</code></pre>
</li>
<li><p>Set up some variables to hold the debug textures we will draw, and then in your <a href="xref:Microsoft.Xna.Framework.Game#Microsoft_Xna_Framework_Game_LoadContent">Game.LoadContent</a> method, initialize them:</p>
<pre><code class="lang-csharp">private Viewport viewport;
private Vector2[] scalingSpritePositions;
private Texture2D squareTexture;
private Vector2 spriteOrigin;
private Matrix spriteScaleMatrix;
protected override void LoadContent()
{
    // Create a new SpriteBatch, which can be used to draw textures.
    _spriteBatch = new SpriteBatch(GraphicsDevice);

    viewport = _graphics.GraphicsDevice.Viewport;
    squareTexture = CreateTexture(GraphicsDevice, 50, 50);
    spriteOrigin = new Vector2(squareTexture.Width / 2, squareTexture.Height / 2);

    scalingSpritePositions = new Vector2[4];
    scalingSpritePositions[0] = new Vector2(25, 25);
    scalingSpritePositions[1] = new Vector2(25, viewport.Height - 25);
    scalingSpritePositions[2] = new Vector2(viewport.Width - 25, 25);
    scalingSpritePositions[3] = new Vector2(viewport.Width - 25, viewport.Height - 25);

    UpdateScaleMatrix();

    base.LoadContent();
}
</code></pre>
</li>
<li><p>To help make the debug texture <code>squareTexture</code> easier, we add a little helper function to just generate the texture rather than import it through the Content Pipeline, as follows:</p>
<pre><code class="lang-csharp">public static Texture2D CreateTexture(GraphicsDevice device, int width, int height)
{
    // Initialize a texture
    Texture2D texture = new Texture2D(device, width, height);

    // The array holds the color for each pixel in the texture
    Color[] data = new Color[width * height];
    for (int pixel = 0; pixel &lt; data.Length; pixel++)
    {
        data[pixel] = Color.White;
    }

    // Set the color
    texture.SetData(data);
    return texture;
}
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>This is a really handy reusable function to create simple textures at runtime.</p>
</div>
</li>
<li><p>Next, we create another method to calculate the Scaling Matrix using <a href="xref:Microsoft.Xna.Framework.Matrix#Microsoft_Xna_Framework_Matrix_CreateScale_System_Single_">Matrix.CreateScale</a> based on the current Graphics Device's resolution, using our original <code>800x600</code> as a reference scale.</p>
<p>This matrix should be recreated any time the resolution of the <a href="xref:Microsoft.Xna.Framework.Graphics.GraphicsDevice">GraphicsDevice</a> changes.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Because you are scaling sprites, you should use only the x and y parameters to create the scaling matrix. Scaling the depth of sprites can result in their depth shifting above 1.0. If that happens, they will not render.</p>
</div>
<pre><code class="lang-csharp">private void UpdateScaleMatrix()
{
    // Default resolution is 800x600; scale sprites up or down based on
    // current viewport
    float screenScale = _graphics.GraphicsDevice.Viewport.Width / 800f;
    // Create the scale transform for Draw. 
    // Do not scale the sprite depth (Z=1).
    spriteScaleMatrix = Matrix.CreateScale(screenScale, screenScale, 1);
}
</code></pre>
</li>
<li><p>To allow you to quickly change the current resolution, in your <a href="xref:Microsoft.Xna.Framework.Game#Microsoft_Xna_Framework_Game_Update_Microsoft_Xna_Framework_GameTime_">Game.Update</a> method add the following.</p>
<p>This example uses the <code>A</code> and <code>B</code> keys to switch between two resolutions.</p>
<pre><code class="lang-csharp">protected override void Update(GameTime gameTime)
{
    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed || Keyboard.GetState().IsKeyDown(Keys.Escape))
        Exit();

    if (Keyboard.GetState().IsKeyDown(Keys.A))
    {
        _graphics.PreferredBackBufferHeight = 768;
        _graphics.PreferredBackBufferWidth = 1024;
        _graphics.ApplyChanges();
        UpdateScaleMatrix();
    }
    if (Keyboard.GetState().IsKeyDown(Keys.B))
    {
        _graphics.PreferredBackBufferHeight = 600;
        _graphics.PreferredBackBufferWidth = 800;
        _graphics.ApplyChanges();
        UpdateScaleMatrix();
    }
    base.Update(gameTime);
}
</code></pre>
</li>
<li><p>In your <a href="xref:Microsoft.Xna.Framework.Game#Microsoft_Xna_Framework_Game_Draw_Microsoft_Xna_Framework_GameTime_">Game.Draw</a> method, call <a href="xref:Microsoft.Xna.Framework.Graphics.SpriteBatch#Microsoft_Xna_Framework_Graphics_SpriteBatch_Begin_Microsoft_Xna_Framework_Graphics_SpriteSortMode_Microsoft_Xna_Framework_Graphics_BlendState_Microsoft_Xna_Framework_Graphics_SamplerState_Microsoft_Xna_Framework_Graphics_DepthStencilState_Microsoft_Xna_Framework_Graphics_RasterizerState_Microsoft_Xna_Framework_Graphics_Effect_System_Nullable_Microsoft_Xna_Framework_Matrix__">SpriteBatch.Begin</a>, passing the scaling matrix created in <a href="xref:Microsoft.Xna.Framework.Game#Microsoft_Xna_Framework_Game_LoadContent">Game.LoadContent</a>.</p>
</li>
<li><p>Finally, draw your scene normally, then call <a href="xref:Microsoft.Xna.Framework.Graphics.SpriteBatch#Microsoft_Xna_Framework_Graphics_SpriteBatch_End">SpriteBatch.End</a>.</p>
<p>All of the sprites you draw will be scaled according to the matrix.</p>
<pre><code class="lang-csharp">protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    // Initialize the batch with the scaling matrix
    _spriteBatch.Begin(transformMatrix: spriteScaleMatrix);
    // Draw a sprite at each corner
    for (int i = 0; i &lt; scalingSpritePositions.Length; i++)
    {
        _spriteBatch.Draw(squareTexture, scalingSpritePositions[i], null, Color.White,
            0f, spriteOrigin, 1f, SpriteEffects.None, 0f);
    }
    _spriteBatch.End();

    base.Draw(gameTime);
}
</code></pre>
</li>
</ol>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="HowTo_Draw_A_Sprite.html">Drawing a Sprite</a></li>
</ul>
<h3 id="concepts">Concepts</h3>
<ul>
<li><a href="../../whatis/graphics/WhatIs_Sprite.html">What Is a Sprite?</a></li>
</ul>
<h3 id="reference">Reference</h3>
<ul>
<li><a href="xref:Microsoft.Xna.Framework.Graphics.SpriteBatch">SpriteBatch</a></li>
<li><a href="xref:Microsoft.Xna.Framework.Graphics.SpriteBatch#Microsoft_Xna_Framework_Graphics_SpriteBatch_Draw_Microsoft_Xna_Framework_Graphics_Texture2D_Microsoft_Xna_Framework_Vector2_Microsoft_Xna_Framework_Color_">SpriteBatch.Draw</a></li>
<li><a href="xref:Microsoft.Xna.Framework.Graphics.Texture2D">Texture2D</a></li>
<li><a href="xref:Microsoft.Xna.Framework.Matrix#Microsoft_Xna_Framework_Matrix_CreateScale_System_Single_">Matrix.CreateScale</a></li>
</ul>

</article>
                </div>

            </main>
        </div>


        <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
        <script type="text/javascript" src="../../../../../../styles/jquery.twbsPagination.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/jquery.mark.min.js"></script>
        <script type="text/javascript" src="../../../../../../styles/url.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/anchor-js@5.0.0/anchor.min.js"></script>
        <script type="text/javascript" src="../../../../../../styles/docfx.js"></script>
        <script type="text/javascript" src="../../../../../../styles/main.js"></script>
        <script type="text/javascript" src="../../../../../../styles/singulink.js"></script>    </body>
</html>
